{
  "version": 3,
  "sources": ["../src/modules/root-manager.ts", "../node_modules/nanoid/index.browser.js", "../src/shared/utils.ts", "../src/modules/observable.ts", "../src/modules/optimization-tree.ts", "../src/modules/batch-manager.ts", "../src/modules/reaction.ts", "../src/components/observer.ts", "../src/modules/components/manager.ts", "../src/modules/components/constants.ts", "../src/modules/components/object-manager.ts", "../src/modules/components/value-manager.ts", "../src/modules/components/array-manager.ts", "../src/modules/make-observable.ts", "../src/modules/watch.ts", "../src/modules/autorun.ts", "../src/modules/when.ts", "../src/modules/transaction.ts", "../src/index.ts"],
  "sourcesContent": ["import {\r\n  ManagerInstance,\r\n  ReactionInstance,\r\n  RootManagerInstance,\r\n} from \"shared/types\";\r\n\r\nclass RootManager implements RootManagerInstance {\r\n  private readonly managers: Record<string, ManagerInstance> = {};\r\n  private readonly reactions: Record<string, ReactionInstance> = {};\r\n\r\n  public addReaction<T>(id: string, reaction: ReactionInstance): void {\r\n    this.reactions[id] = reaction;\r\n  }\r\n\r\n  public deleteReaction(id: string): boolean {\r\n    return delete this.reactions[id];\r\n  }\r\n\r\n  public getReaction<T>(id: string): ReactionInstance {\r\n    return this.reactions[id];\r\n  }\r\n\r\n  public addManager(manager: ManagerInstance): void {\r\n    this.managers[manager.name] = manager;\r\n  }\r\n\r\n  public getManager(id: string): ManagerInstance {\r\n    return this.managers[id];\r\n  }\r\n\r\n  private getManagerByPathRecursive(\r\n    root: ManagerInstance,\r\n    [path, ...rest]: string[]\r\n  ): ManagerInstance | null {\r\n    if (root.name === path) {\r\n      return root;\r\n    }\r\n\r\n    if (!rest.length) {\r\n      return root.managers[path];\r\n    }\r\n\r\n    return this.getManagerByPathRecursive(root.managers[path], rest);\r\n  }\r\n\r\n  public getManagerByPath([\r\n    rootPath,\r\n    ...restPath\r\n  ]: string[]): ManagerInstance<any> | null {\r\n    return this.getManagerByPathRecursive(this.managers[rootPath], restPath);\r\n  }\r\n}\r\n\r\nexport default new RootManager();\r\n", "export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n", "import { nanoid } from \"nanoid\";\r\n\r\nexport function isObject<T>(target: T) {\r\n  return target && typeof target === \"object\" && !Array.isArray(target);\r\n}\r\n\r\nexport function isPrimitive<T>(target: T) {\r\n  return !isObject(target) && !Array.isArray(target);\r\n}\r\n\r\nexport function isClass<T>(v: T) {\r\n  return typeof v === \"function\" && /^\\s*class\\s+/.test(v.toString());\r\n}\r\n\r\nexport function isFunction(functionToCheck: Function) {\r\n  return (\r\n    functionToCheck && {}.toString.call(functionToCheck) === \"[object Function]\"\r\n  );\r\n}\r\n\r\nexport function getProperties<T extends object>(target: T): string[] {\r\n  return Object.keys(target).filter((key) => !isFunction((target as any)[key]));\r\n}\r\n\r\nexport function createPrivateProp<T>(\r\n  target: T,\r\n  key: string | symbol,\r\n  value: unknown\r\n) {\r\n  Object.defineProperty(target, key, {\r\n    enumerable: false,\r\n    writable: false,\r\n    configurable: false,\r\n    value,\r\n  });\r\n}\r\n\r\nexport function createEventUId(objectId: string, key: string | symbol): string {\r\n  return `${objectId}#${key.toString()}`;\r\n}\r\n\r\nexport function createUniqPath(path = \"ObservableState\"): string {\r\n  return `${path}$${nanoid(4)}`;\r\n}\r\n\r\nexport function runAfterScript(fn: VoidFunction): Promise<void> {\r\n  return Promise.resolve().then(fn);\r\n}\r\n\r\nexport function getGetters<T extends object>(\r\n  obj: T,\r\n  ignoredKeys: string[] = []\r\n): Record<string, PropertyDescriptor> {\r\n  const descriptions = Object.getOwnPropertyDescriptors(\r\n    Object.getPrototypeOf(obj)\r\n  );\r\n  const result: Record<string, PropertyDescriptor> = {};\r\n  for (const key in descriptions) {\r\n    const description = descriptions[key];\r\n    if (\r\n      !description.writable &&\r\n      description.get &&\r\n      !description.set &&\r\n      !ignoredKeys.includes(key)\r\n    ) {\r\n      result[key] = description;\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n", "import { isObject } from \"shared/utils\";\r\nimport type { ManagerInstance, ManagerOptions } from \"shared/types\";\r\n\r\nimport { ArrayManager, ObjectManager, ValueManager } from \"./components\";\r\n\r\nexport function observable<T extends object>(\r\n  target: T,\r\n  options: ManagerOptions\r\n): ManagerInstance<T>;\r\n\r\nexport function observable<T>(\r\n  target: Array<T>,\r\n  options: ManagerOptions\r\n): ManagerInstance<T>;\r\n\r\nexport function observable<T>(\r\n  target: T,\r\n  options: ManagerOptions\r\n): ManagerInstance<T>;\r\n\r\nexport function observable<T>(target: T, options: ManagerOptions) {\r\n  if (Array.isArray(target)) {\r\n    return new ArrayManager(target, options);\r\n  }\r\n\r\n  if (isObject(target)) {\r\n    return new ObjectManager(target as object, options);\r\n  }\r\n\r\n  if (target instanceof Set) {\r\n    return target;\r\n  }\r\n\r\n  if (target instanceof Map) {\r\n    return target;\r\n  }\r\n\r\n  return new ValueManager(target, options);\r\n}\r\n", "import {\r\n  ListenManagersResult,\r\n  ManagerInstance,\r\n  ObserverTypes,\r\n  OptimizationTreeInstance,\r\n  TreeNodeInstance,\r\n} from \"shared/types\";\r\n\r\nimport rootManager from \"./root-manager\";\r\n\r\nclass TreeNode implements TreeNodeInstance {\r\n  public children: Record<string, TreeNodeInstance> = {};\r\n  public listenTypes: ObserverTypes[] = [];\r\n\r\n  constructor(public value: string, public manager: ManagerInstance | null) {}\r\n\r\n  public get keys() {\r\n    return Object.keys(this.children);\r\n  }\r\n\r\n  public pushPath([path, ...paths]: string[]): void {\r\n    const nextNode =\r\n      this.children[path] ||\r\n      new TreeNode(path, this.manager?.getManager(path) || null);\r\n\r\n    this.children[path] = nextNode;\r\n\r\n    if (!paths.length) {\r\n      return;\r\n    }\r\n\r\n    return nextNode.pushPath(paths);\r\n  }\r\n}\r\n\r\nfunction isEqualArray<T>(arr1: T[], arr2: T[]): boolean {\r\n  if (arr1.length !== arr2.length) {\r\n    return false;\r\n  }\r\n\r\n  return arr1.every((key) => arr2.indexOf(key) !== -1);\r\n}\r\n\r\nclass OptimizationTree extends TreeNode implements OptimizationTreeInstance {\r\n  constructor(paths: string[][]) {\r\n    super(\"\", null);\r\n\r\n    this.children = OptimizationTree.createNodesFromPaths(paths);\r\n\r\n    this.linking();\r\n  }\r\n\r\n  private static createNodesFromPaths(\r\n    paths: string[][]\r\n  ): Record<string, TreeNodeInstance> {\r\n    const nodes: Record<string, TreeNodeInstance> = {};\r\n    for (const full of paths) {\r\n      const [path, ...rest] = full;\r\n      nodes[path] =\r\n        nodes[path] || new TreeNode(path, rootManager.getManager(path));\r\n\r\n      nodes[path].pushPath(rest);\r\n    }\r\n\r\n    return nodes;\r\n  }\r\n\r\n  private linkingRecursive(node: TreeNodeInstance) {\r\n    const keys = Object.keys(node.children);\r\n    if (!keys.length) {\r\n      return (node.listenTypes = [\"all\"]);\r\n    }\r\n\r\n    node.listenTypes = isEqualArray(keys, node.manager!.keys)\r\n      ? [\"add\", \"change\", \"remove\"]\r\n      : [\"change\"];\r\n\r\n    for (const key of keys) {\r\n      this.linkingRecursive(node.children[key]);\r\n    }\r\n  }\r\n\r\n  private linking(): void {\r\n    for (const key in this.children) {\r\n      this.linkingRecursive(this.children[key]);\r\n    }\r\n  }\r\n\r\n  private optimizedManagersRec(node: TreeNode): ListenManagersResult[] {\r\n    let res: ListenManagersResult[] = [\r\n      { listenTypes: node.listenTypes, manager: node.manager! },\r\n    ];\r\n    if (!node.keys.length) {\r\n      return res;\r\n    }\r\n\r\n    for (const key in node.children) {\r\n      res = res.concat(this.optimizedManagersRec(node.children[key]));\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  public getListenManagers(): ListenManagersResult[] {\r\n    let result: ListenManagersResult[] = [];\r\n    for (const key in this.children) {\r\n      result = result.concat(this.optimizedManagersRec(this.children[key]));\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport { TreeNode };\r\nexport default OptimizationTree;\r\n", "import { BatchEvent, BatchListener, BatchManagerInstance } from \"shared/types\";\r\n\r\nimport OptimizationTree from \"modules/optimization-tree\";\r\n\r\ninterface BatchInstance {\r\n  get hasBatch(): boolean;\r\n  open(): void;\r\n  action(handler: VoidFunction): void;\r\n  closeBatch(): void;\r\n}\r\n\r\nclass Batch implements BatchInstance {\r\n  private readonly batches: Set<VoidFunction>[] = [];\r\n\r\n  public get hasBatch(): boolean {\r\n    return this.batches.length > 0;\r\n  }\r\n\r\n  public open(): void {\r\n    this.batches.push(new Set<VoidFunction>());\r\n  }\r\n\r\n  public action(handler: VoidFunction): void {\r\n    if (!this.hasBatch) {\r\n      return handler();\r\n    }\r\n\r\n    const lastBatch = this.batches[this.batches.length - 1];\r\n\r\n    lastBatch.add(handler);\r\n  }\r\n\r\n  public closeBatch(): void {\r\n    const batch = this.batches.pop();\r\n    if (!batch) {\r\n      return;\r\n    }\r\n\r\n    batch.forEach((handler) => handler());\r\n  }\r\n}\r\n\r\nclass BatchManager implements BatchManagerInstance {\r\n  private readonly batches = new Set<BatchListener>();\r\n\r\n  private watch<T>(fn: () => T, listener: BatchListener) {\r\n    this.register(listener);\r\n\r\n    const result = fn();\r\n\r\n    this.unregister(listener);\r\n\r\n    return result;\r\n  }\r\n\r\n  public register(listener: BatchListener): void {\r\n    this.batches.add(listener);\r\n  }\r\n\r\n  public unregister(listener: BatchListener): void {\r\n    this.batches.delete(listener);\r\n  }\r\n\r\n  public emit(event: BatchEvent): void {\r\n    if (!this.batches.size) {\r\n      return;\r\n    }\r\n\r\n    Array.from(this.batches).pop()!(event);\r\n  }\r\n\r\n  public getCaptured<T>(fn: () => T) {\r\n    const paths: string[][] = [];\r\n\r\n    const result = this.watch(fn, ({ path }) => {\r\n      paths.push(path);\r\n    });\r\n\r\n    return {\r\n      result,\r\n      variables: new OptimizationTree(paths),\r\n    };\r\n  }\r\n\r\n  public optimizePaths(paths: string[][]): OptimizationTree {\r\n    return new OptimizationTree(paths);\r\n  }\r\n}\r\n\r\nexport const transactionBatches = new Batch();\r\nexport default new BatchManager();\r\nexport { BatchManager };\r\n", "import { nanoid } from \"nanoid\";\r\n\r\nimport {\r\n  BatchEvent,\r\n  OptimizationTreeInstance,\r\n  ReactionInstance,\r\n  WatchCallback,\r\n} from \"shared/types\";\r\n\r\nimport batchManager, { transactionBatches } from \"./batch-manager\";\r\nimport OptimizationTree from \"./optimization-tree\";\r\nimport rootManager from \"./root-manager\";\r\n\r\nclass Reaction implements ReactionInstance {\r\n  private paths: string[][] = [];\r\n  private unsubscribeFns: (() => void)[] = [];\r\n\r\n  constructor(public readonly id: string = `Reaction#${nanoid(4)}`) {\r\n    rootManager.addReaction(id, this);\r\n  }\r\n\r\n  private listener = ({ path }: BatchEvent) => {\r\n    this.paths.push(path);\r\n  };\r\n\r\n  private unlisten = () => {\r\n    if (!this.unsubscribeFns.length) {\r\n      return;\r\n    }\r\n\r\n    this.unsubscribeFns.forEach((unlistener) => unlistener());\r\n    this.unsubscribeFns = [];\r\n  };\r\n\r\n  public getOptimizationTree(): OptimizationTreeInstance | null {\r\n    if (!this.paths.length) {\r\n      return null;\r\n    }\r\n\r\n    return new OptimizationTree(this.paths);\r\n  }\r\n\r\n  public dispose(): void {\r\n    rootManager.deleteReaction(this.id);\r\n\r\n    this.paths = [];\r\n    this.unlisten();\r\n  }\r\n\r\n  public startWatch(): void {\r\n    this.paths = [];\r\n    batchManager.register(this.listener);\r\n  }\r\n\r\n  public endWatch(): void {\r\n    batchManager.unregister(this.listener);\r\n  }\r\n\r\n  public watch(watch: WatchCallback): VoidFunction {\r\n    const tree = this.getOptimizationTree();\r\n    if (!tree) {\r\n      console.warn(\r\n        `Instances for listen in reaction \\`${this.id}\\` not found. Reconsider the use of adverse reactions.`\r\n      );\r\n\r\n      return () => {};\r\n    }\r\n\r\n    const managers = tree.getListenManagers();\r\n    const handler = () => watch(this.unlisten);\r\n    this.unlisten();\r\n    this.unsubscribeFns = managers.map(({ listenTypes, manager }) =>\r\n      manager.listen(listenTypes, () => {\r\n        transactionBatches.action(handler);\r\n      })\r\n    );\r\n\r\n    return this.unlisten;\r\n  }\r\n\r\n  public syncCaptured<T>(fn: () => T): T {\r\n    this.startWatch();\r\n\r\n    const result = fn();\r\n\r\n    this.endWatch();\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport { Reaction };\r\n", "import {\r\n  Event,\r\n  Listener,\r\n  ObserverInstance,\r\n  ObserverWithTypeInstance,\r\n} from \"shared/types\";\r\n\r\nclass Observer<T> implements ObserverInstance<T> {\r\n  private listeners = new Set<Listener<T>>();\r\n\r\n  public listen(listener: Listener<T>): VoidFunction {\r\n    this.listeners.add(listener);\r\n\r\n    return () => {\r\n      this.listeners.delete(listener);\r\n    };\r\n  }\r\n\r\n  public emit(event: Event<T>): void {\r\n    for (const listener of this.listeners) {\r\n      if (listener(event)) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass ObserverWithType<T, E extends string>\r\n  implements ObserverWithTypeInstance<T, E>\r\n{\r\n  private readonly listenerMap = new Map<E | \"all\", ObserverInstance<T>>();\r\n  protected observable = true;\r\n\r\n  public listen(type: E | E[], callback: Listener<T>): VoidFunction {\r\n    if (!this.observable) {\r\n      return () => {};\r\n    }\r\n\r\n    if (Array.isArray(type)) {\r\n    }\r\n\r\n    const unlisten: Function[] = [];\r\n    const types = Array.isArray(type) ? type : [type];\r\n    for (const eachType of types) {\r\n      const listeners = this.listenerMap.get(eachType) || new Observer<T>();\r\n\r\n      this.listenerMap.set(eachType, listeners);\r\n\r\n      unlisten.push(listeners.listen(callback));\r\n    }\r\n\r\n    return () => {\r\n      unlisten.forEach((fn) => fn());\r\n    };\r\n  }\r\n\r\n  public emit(type: E, event: Event<T>): void {\r\n    if (!this.observable || event.current === event.prev) {\r\n      return;\r\n    }\r\n\r\n    const listeners = this.listenerMap.get(type);\r\n    const allListeners = this.listenerMap.get(\"all\");\r\n    if (listeners) {\r\n      listeners.emit(event);\r\n    }\r\n\r\n    if (allListeners) {\r\n      allListeners.emit(event);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Observer;\r\nexport { ObserverWithType };\r\n", "import {\r\n  Annotation,\r\n  ManagerInstance,\r\n  ManagerOptions,\r\n  ObserverTypes,\r\n} from \"shared/types\";\r\n\r\nimport { ObserverWithType } from \"components/observer\";\r\n\r\nimport batchManager from \"modules/batch-manager\";\r\n\r\nabstract class Manager<T, A extends Annotation, M>\r\n  extends ObserverWithType<T, ObserverTypes>\r\n  implements Partial<ManagerInstance<T, M>>\r\n{\r\n  protected annotation: A = {} as A;\r\n  public path: string[] = [];\r\n\r\n  constructor({ path, annotation }: ManagerOptions, defaultAnnotation: A) {\r\n    super();\r\n\r\n    this.path = path;\r\n    this.annotation = { ...defaultAnnotation, ...annotation };\r\n    this.observable = this.annotation.observable!;\r\n  }\r\n\r\n  public dispose(): void {\r\n    this.path = [];\r\n    this.emit(\"dispose\", { prev: this.snapshot });\r\n  }\r\n\r\n  protected reportUsage(): void {\r\n    if (!this.annotation.observable) {\r\n      return;\r\n    }\r\n\r\n    batchManager.emit({ path: this.path });\r\n  }\r\n\r\n  protected joinToPath(key: string | symbol): string[] {\r\n    return [...this.path, String(key)];\r\n  }\r\n\r\n  public get name(): string {\r\n    return this.path[this.path.length - 1];\r\n  }\r\n\r\n  public get snapshot(): T {\r\n    // @ts-ignore\r\n    return this.target;\r\n  }\r\n\r\n  public get keys(): string[] {\r\n    return [];\r\n  }\r\n\r\n  public toString(): string {\r\n    return String(this.snapshot);\r\n  }\r\n}\r\n\r\nexport default Manager;\r\n", "import {\r\n  ArrayAnnotation,\r\n  ComputedAnnotation,\r\n  ObserverAnnotation,\r\n  ValueAnnotation,\r\n} from \"shared/types\";\r\n\r\nexport const OBSERVER_ANNOTATION: ObserverAnnotation = {\r\n  observable: true,\r\n};\r\n\r\nexport const VALUE_ANNOTATION: ValueAnnotation = {\r\n  observable: true,\r\n};\r\n\r\nexport const COMPUTED_ANNOTATION: ComputedAnnotation = {\r\n  observable: true,\r\n  memoised: true,\r\n};\r\n\r\nexport const ARRAY_ANNOTATION: ArrayAnnotation = {\r\n  observable: true,\r\n};\r\n", "import type {\r\n  Annotated,\r\n  ComputedAnnotation,\r\n  ManagerInstance,\r\n  ManagerOptions,\r\n  EntryAnnotation,\r\n  ObserverAnnotation,\r\n  ReactionInstance,\r\n  RequiredManagerInstance,\r\n} from \"shared/types\";\r\nimport { getGetters, runAfterScript } from \"shared/utils\";\r\n\r\nimport { observable } from \"modules/observable\";\r\n\r\nimport { Reaction } from \"../reaction\";\r\nimport Manager from \"./manager\";\r\nimport { COMPUTED_ANNOTATION, OBSERVER_ANNOTATION } from \"./constants\";\r\n\r\nclass ComputedManager<T>\r\n  extends Manager<T, ComputedAnnotation, unknown>\r\n  implements RequiredManagerInstance<T>\r\n{\r\n  private reaction: ReactionInstance;\r\n  private savedResult?: T;\r\n  private isMemoized = false;\r\n  private isChanged = false;\r\n  public managers: unknown;\r\n\r\n  constructor(private readonly target: T, options: ManagerOptions) {\r\n    super(options, COMPUTED_ANNOTATION);\r\n\r\n    this.reaction = new Reaction(`Computed#${this.path.join(\".\")}`);\r\n\r\n    this.emit(\"define\", { current: this.snapshot });\r\n  }\r\n\r\n  public getManager(): ManagerInstance | null {\r\n    return null;\r\n  }\r\n\r\n  public get snapshot(): T {\r\n    return (this.target as Function)();\r\n  }\r\n\r\n  public get value(): T {\r\n    const { memoised } = this.annotation;\r\n    if (!memoised) {\r\n      return this.target;\r\n    }\r\n\r\n    return (() => {\r\n      this.reportUsage();\r\n\r\n      if (this.isMemoized && !this.isChanged) {\r\n        return this.savedResult!;\r\n      }\r\n\r\n      this.savedResult = this.reaction.syncCaptured(this.target as () => T);\r\n      this.isMemoized = true;\r\n      this.isChanged = false;\r\n\r\n      this.reaction.watch(() => {\r\n        this.isChanged = true;\r\n\r\n        runAfterScript(() => {\r\n          this.emit(\"change\", {\r\n            current: undefined as T,\r\n            prev: this.savedResult!,\r\n          });\r\n        });\r\n      });\r\n\r\n      return this.savedResult;\r\n    }) as T;\r\n  }\r\n\r\n  public setValue(): boolean {\r\n    return false;\r\n  }\r\n\r\n  public dispose(): void {\r\n    this.reaction.dispose();\r\n    super.dispose();\r\n  }\r\n}\r\n\r\nclass ObjectManager<T extends object | Annotated>\r\n  extends Manager<\r\n    T,\r\n    ObserverAnnotation,\r\n    Record<string | symbol, ManagerInstance<any>>\r\n  >\r\n  implements RequiredManagerInstance<T>\r\n{\r\n  public managers: Record<string | symbol, ManagerInstance<any>> = {};\r\n\r\n  private proxy: T;\r\n\r\n  private get annotationOptions(): EntryAnnotation {\r\n    const annotation = (this.target as Annotated).annotation || {};\r\n\r\n    return {\r\n      fields: {},\r\n      getters: {},\r\n      ...annotation,\r\n    };\r\n  }\r\n\r\n  private handlers: Required<\r\n    Pick<ProxyHandler<T>, \"deleteProperty\" | \"defineProperty\">\r\n  > = {\r\n    deleteProperty: (_target, key) => {\r\n      const manager = this.managers[key];\r\n      const deleteResult = delete this.managers[key];\r\n\r\n      if (deleteResult) {\r\n        manager.dispose();\r\n        this.emit(\"remove\", { prev: manager.value });\r\n      }\r\n\r\n      return deleteResult;\r\n    },\r\n    defineProperty: (_target, key, prop) => {\r\n      const result = this.defineProperty(\r\n        key,\r\n        prop,\r\n        this.annotationOptions.fields[String(key)]\r\n      );\r\n\r\n      this.emit(\"add\", {\r\n        current: this.value,\r\n      });\r\n\r\n      return result;\r\n    },\r\n  };\r\n\r\n  private defineProperty(\r\n    key: string | symbol,\r\n    { value, configurable = true, enumerable = true }: PropertyDescriptor,\r\n    options?: ObserverAnnotation\r\n  ): boolean {\r\n    this.managers[key] = observable(value, {\r\n      path: this.joinToPath(key),\r\n      annotation: options,\r\n    });\r\n\r\n    Object.defineProperty(this.target, key, {\r\n      configurable,\r\n      enumerable,\r\n      get: () => this.managers[key].value,\r\n      set: (value) => this.managers[key].setValue(value),\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  private defineComputed(\r\n    key: string,\r\n    { get, ...descriptions }: PropertyDescriptor,\r\n    options?: ComputedAnnotation\r\n  ): void {\r\n    this.managers[key] = new ComputedManager(get!.bind(this.target), {\r\n      path: this.joinToPath(key),\r\n      annotation: options,\r\n    });\r\n\r\n    Object.defineProperty(this.target, key, {\r\n      ...descriptions,\r\n      get: this.managers[key].value,\r\n    });\r\n  }\r\n\r\n  constructor(private target: T, options: ManagerOptions) {\r\n    super(options, OBSERVER_ANNOTATION);\r\n\r\n    this.proxy = this.define(target);\r\n  }\r\n\r\n  public get name(): string {\r\n    return this.path[this.path.length - 1];\r\n  }\r\n\r\n  public get snapshot(): T {\r\n    return Object.entries(this.managers).reduce(\r\n      (acc, [key, value]) => Object.assign(acc, { [key]: value.snapshot }),\r\n      {} as T\r\n    );\r\n  }\r\n\r\n  public get value(): T {\r\n    this.reportUsage();\r\n\r\n    return this.proxy;\r\n  }\r\n\r\n  public get keys() {\r\n    return Object.keys(this.managers);\r\n  }\r\n\r\n  public setValue(value: T): boolean {\r\n    this.target = value;\r\n    const prev = { ...this.target };\r\n\r\n    this.proxy = this.define(value);\r\n\r\n    this.emit(\"change\", {\r\n      current: value,\r\n      prev,\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  private clearManagers() {\r\n    for (const key in this.managers) {\r\n      this.managers[key].dispose();\r\n    }\r\n\r\n    this.managers = {};\r\n  }\r\n\r\n  public dispose(): void {\r\n    super.dispose();\r\n    this.clearManagers();\r\n  }\r\n\r\n  public getManager(key: string | symbol): ManagerInstance {\r\n    return this.managers[key];\r\n  }\r\n\r\n  private define(target: T): T {\r\n    this.clearManagers();\r\n\r\n    const proxy = new Proxy(target, this.handlers);\r\n    const getters = getGetters(target, [\"annotation\"]);\r\n\r\n    const annotation = this.annotationOptions;\r\n\r\n    for (const key in target) {\r\n      this.defineProperty(key, { value: target[key] }, annotation.fields[key]);\r\n    }\r\n\r\n    for (const key in getters) {\r\n      this.defineComputed(key, getters[key], annotation.getters[key]);\r\n    }\r\n\r\n    return proxy;\r\n  }\r\n}\r\n\r\nexport default ObjectManager;\r\n", "import {\r\n  ManagerInstance,\r\n  ManagerOptions,\r\n  RequiredManagerInstance,\r\n  ValueAnnotation,\r\n} from \"shared/types\";\r\n\r\nimport { VALUE_ANNOTATION } from \"./constants\";\r\nimport Manager from \"./manager\";\r\n\r\nclass ValueManager<T>\r\n  extends Manager<T, ValueAnnotation, unknown>\r\n  implements RequiredManagerInstance<T>\r\n{\r\n  constructor(public target: T, options: ManagerOptions) {\r\n    super(options, VALUE_ANNOTATION);\r\n\r\n    this.emit(\"define\", { current: target });\r\n  }\r\n\r\n  get value(): T {\r\n    this.reportUsage();\r\n\r\n    return this.target;\r\n  }\r\n\r\n  public setValue(value: any): boolean {\r\n    const prev = this.target;\r\n\r\n    this.target = value;\r\n\r\n    this.emit(\"change\", {\r\n      current: value,\r\n      prev,\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  public getManager(): ManagerInstance | null {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default ValueManager;\r\n", "import { observable } from \"modules/observable\";\r\nimport {\r\n  ArrayAnnotation,\r\n  ManagerInstance,\r\n  ManagerOptions,\r\n  RequiredManagerInstance,\r\n} from \"shared/types\";\r\nimport { isFunction } from \"shared/utils\";\r\nimport { ARRAY_ANNOTATION } from \"./constants\";\r\n\r\nimport Manager from \"./manager\";\r\n\r\nclass ArrayManager<T>\r\n  extends Manager<Array<T>, ArrayAnnotation, Array<ManagerInstance<T>>>\r\n  implements RequiredManagerInstance<Array<T>>\r\n{\r\n  private managers: Array<ManagerInstance> = [];\r\n  private proxy: Array<T>;\r\n\r\n  constructor(private target: Array<T>, options: ManagerOptions) {\r\n    super(options, ARRAY_ANNOTATION);\r\n\r\n    this.proxy = this.define(target);\r\n\r\n    this.emit(\"define\", { current: this.value });\r\n  }\r\n\r\n  private handlers: Required<\r\n    Pick<ProxyHandler<Array<T>>, \"deleteProperty\" | \"get\" | \"set\">\r\n  > = {\r\n    get: (_target, key) => {\r\n      const index = Number(key);\r\n      if (!Number.isNaN(index)) {\r\n        return this.managers[index]?.value;\r\n      }\r\n\r\n      const value = this.target[key as keyof Array<T>];\r\n      if (isFunction(value as any)) {\r\n        return (...args: any[]) =>\r\n          (value as Function).call(this.proxy, ...args);\r\n      }\r\n\r\n      return value;\r\n    },\r\n    set: (_target, key, value) => {\r\n      const index = Number(key);\r\n      if (!Number.isNaN(index)) {\r\n        if (index in this.managers) {\r\n          return this.managers[index].setValue(value);\r\n        }\r\n\r\n        try {\r\n          this.managers[index] = observable(value, {\r\n            path: this.joinToPath(key),\r\n          });\r\n          this.target[index] = value;\r\n\r\n          this.emit(\"add\", { current: this.value });\r\n\r\n          return true;\r\n        } catch {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      this.target[key as keyof Array<T>] = value;\r\n\r\n      return true;\r\n    },\r\n    deleteProperty: (_target, key) => {\r\n      const index = Number(key);\r\n      if (Number.isNaN(index)) {\r\n        return false;\r\n      }\r\n\r\n      if (!(index in this.target)) {\r\n        return false;\r\n      }\r\n\r\n      const manager = this.managers[index];\r\n      const deleteResult = this.target.splice(index, 1).length === 1;\r\n      if (deleteResult) {\r\n        if (manager) {\r\n          this.managers.splice(index, 1);\r\n          manager.dispose();\r\n        }\r\n      }\r\n\r\n      return deleteResult;\r\n    },\r\n  };\r\n\r\n  public setValue(value: Array<T>): boolean {\r\n    const prev = this.value;\r\n\r\n    this.target = value;\r\n    this.proxy = this.define(value);\r\n\r\n    this.emit(\"change\", {\r\n      current: value,\r\n      prev,\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  public get snapshot(): Array<T> {\r\n    return [...this.target];\r\n  }\r\n\r\n  public get keys(): string[] {\r\n    const result = [];\r\n    for (const index in this.target) {\r\n      result.push(index);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  public get value(): Array<T> {\r\n    this.reportUsage();\r\n\r\n    return this.proxy;\r\n  }\r\n\r\n  public getManager(key: string | symbol): ManagerInstance | null {\r\n    return this.managers[Number(key)];\r\n  }\r\n\r\n  private clearManagers() {\r\n    for (const manager of this.managers) {\r\n      manager.dispose();\r\n    }\r\n\r\n    this.managers = [];\r\n  }\r\n\r\n  public dispose(): void {\r\n    super.dispose();\r\n    this.clearManagers();\r\n  }\r\n\r\n  private define(target: Array<T>): Array<T> {\r\n    this.clearManagers();\r\n\r\n    for (const item of target) {\r\n      this.managers.push(\r\n        observable<T>(item, {\r\n          path: this.joinToPath(String(this.managers.length)),\r\n        })\r\n      );\r\n    }\r\n\r\n    return new Proxy(target, this.handlers);\r\n  }\r\n}\r\n\r\nexport default ArrayManager;\r\n", "import rootManager from \"./root-manager\";\r\n\r\nimport type { ManagerInstance, Constructable, Annotated } from \"shared/types\";\r\nimport { createUniqPath } from \"shared/utils\";\r\n\r\nimport { ArrayManager, ObjectManager } from \"./components\";\r\n\r\nfunction observableValue<T>(manager: ManagerInstance<T>): T {\r\n  rootManager.addManager(manager);\r\n\r\n  return manager.value;\r\n}\r\n\r\nconsole.log(rootManager);\r\n\r\nexport const observable = {\r\n  object: <T extends object | Annotated>(target: T) =>\r\n    observableValue(new ObjectManager(target, { path: [createUniqPath()] })),\r\n  class: <T extends object | Annotated>(Target: Constructable<T>): T =>\r\n    observableValue(\r\n      new ObjectManager(new Target(), { path: [createUniqPath(Target.name)] })\r\n    ),\r\n  array: <T>(target: Array<T>) =>\r\n    new ArrayManager(target, { path: [createUniqPath()] }),\r\n  map: () => new Map(),\r\n  set: () => new Set(),\r\n};\r\n", "import { WatchOptions } from \"shared/types\";\r\nimport { runAfterScript } from \"shared/utils\";\r\n\r\nimport { Reaction } from \"./reaction\";\r\n\r\nfunction watch<T>(\r\n  contextFn: () => T,\r\n  callback: (current: T, prev: T) => void,\r\n  {\r\n    isEqual = (a, b) => a === b,\r\n    initialCall = false,\r\n  }: Partial<WatchOptions<T>> = {}\r\n): VoidFunction {\r\n  const reaction = new Reaction();\r\n  let result = reaction.syncCaptured(contextFn);\r\n\r\n  if (initialCall) {\r\n    callback(result, undefined as T);\r\n  }\r\n\r\n  const watch = () => {\r\n    const value = reaction.syncCaptured(contextFn);\r\n    if (!isEqual(value, result)) {\r\n      callback(value, result);\r\n      result = value;\r\n    }\r\n\r\n    runAfterScript(() => reaction.watch(watch));\r\n  };\r\n\r\n  reaction.watch(watch);\r\n\r\n  return () => {\r\n    reaction.dispose();\r\n  };\r\n}\r\n\r\nexport { watch };\r\n", "import { WatchCallback } from \"shared/types\";\r\nimport { runAfterScript } from \"shared/utils\";\r\n\r\nimport { Reaction } from \"./reaction\";\r\n\r\nfunction autorun<T>(fn: () => T): VoidFunction {\r\n  const reaction = new Reaction();\r\n\r\n  reaction.syncCaptured(fn);\r\n\r\n  const watch: WatchCallback = () => {\r\n    reaction.syncCaptured(fn);\r\n\r\n    runAfterScript(() => reaction.watch(watch));\r\n  };\r\n\r\n  reaction.watch(watch);\r\n\r\n  return () => {\r\n    reaction.dispose();\r\n  };\r\n}\r\n\r\nexport { autorun };\r\n", "import { Reaction } from \"./reaction\";\r\n\r\nfunction when<T = boolean>(\r\n  fn: () => T,\r\n  resolveFn: (value: T) => boolean = (value) => Boolean(value)\r\n): Promise<T> {\r\n  const reaction = new Reaction();\r\n\r\n  return new Promise<T>((res) => {\r\n    const result = reaction.syncCaptured(fn);\r\n\r\n    const handle = (value: T) => {\r\n      if (!resolveFn(value)) {\r\n        return;\r\n      }\r\n\r\n      res(value);\r\n\r\n      reaction.dispose();\r\n    };\r\n\r\n    reaction.watch(() => {\r\n      handle(fn());\r\n    });\r\n\r\n    handle(result);\r\n  });\r\n}\r\n\r\nexport { when };\r\n", "import { transactionBatches } from \"./batch-manager\";\r\n\r\nfunction transaction(callback: VoidFunction): void {\r\n  transactionBatches.open();\r\n\r\n  callback();\r\n\r\n  transactionBatches.closeBatch();\r\n}\r\n\r\nexport { transaction };\r\n", "import { autorun, observable, transaction, when } from \"./modules\";\r\n\r\nexport { observable, autorun, when, watch, Reaction } from \"./modules\";\r\nexport type { Annotated, EntryAnnotation } from \"shared/types\";\r\n\r\nclass BaseState {\r\n  counter = 1;\r\n  array = [10, 23];\r\n\r\n  get mul() {\r\n    return this.counter * 2;\r\n  }\r\n}\r\n\r\nclass State extends BaseState {\r\n  increment() {\r\n    this.counter++;\r\n  }\r\n\r\n  decrement() {\r\n    this.counter--;\r\n  }\r\n\r\n  async fetch() {\r\n    this.array[0] = this.counter + 1;\r\n  }\r\n\r\n  push() {\r\n    transaction(() => {\r\n      this.counter++;\r\n      this.array.push(this.array.length * this.counter);\r\n      this.counter++;\r\n    });\r\n  }\r\n}\r\n\r\nconst obj = {\r\n  counter: 1,\r\n  inc() {\r\n    this.counter++;\r\n  },\r\n  dec() {\r\n    this.counter--;\r\n  },\r\n};\r\n\r\nconst state = observable.class(State);\r\nconst stateObj = observable.object(obj);\r\n\r\nconsole.log(state);\r\n\r\nconst div = document.createElement(\"div\");\r\nconst div1 = document.createElement(\"div\");\r\nconst div2 = document.createElement(\"div\");\r\nconst buttonPlus = document.createElement(\"button\");\r\nconst buttonMinus = document.createElement(\"button\");\r\nconst buttonPlus2 = document.createElement(\"button\");\r\nconst buttonMinus2 = document.createElement(\"button\");\r\nconst buttonFetch = document.createElement(\"button\");\r\nconst buttonPush = document.createElement(\"button\");\r\n\r\nbuttonMinus.innerText = \"-\";\r\nbuttonPlus.innerText = \"+\";\r\nbuttonPlus2.innerText = \"+\";\r\nbuttonMinus2.innerText = \"-\";\r\nbuttonFetch.innerText = \"fetch\";\r\nbuttonPush.innerText = \"push\";\r\n\r\nautorun(() => {\r\n  console.log(\"trigger counter\");\r\n  div.innerText = `state: ${state.counter}`;\r\n});\r\n\r\nautorun(() => {\r\n  console.log(\"trigger stateObj\");\r\n  div1.innerText = `stateObj: ${stateObj.counter}`;\r\n});\r\n\r\nautorun(() => {\r\n  console.log(\"trigger array\");\r\n  div2.innerText = `arr: ${JSON.stringify(state.array)}`;\r\n  div.innerText = `state: ${state.counter}`;\r\n});\r\n\r\nwhen(() => state.counter > 3).then(() => {\r\n  console.log(\"test\");\r\n});\r\n\r\nbuttonPlus.addEventListener(\"click\", () => {\r\n  state.increment();\r\n});\r\n\r\nbuttonMinus.addEventListener(\"click\", () => {\r\n  state.decrement();\r\n});\r\n\r\nbuttonPlus2.addEventListener(\"click\", () => {\r\n  stateObj.inc();\r\n});\r\n\r\nbuttonMinus2.addEventListener(\"click\", () => {\r\n  stateObj.dec();\r\n});\r\n\r\nbuttonFetch.addEventListener(\"click\", () => {\r\n  state.fetch();\r\n});\r\n\r\nbuttonPush.addEventListener(\"click\", () => {\r\n  state.push();\r\n});\r\n\r\ndocument.body.appendChild(div);\r\ndocument.body.appendChild(div1);\r\ndocument.body.appendChild(div2);\r\ndocument.body.appendChild(buttonPlus);\r\ndocument.body.appendChild(buttonMinus);\r\ndocument.body.appendChild(buttonPlus2);\r\ndocument.body.appendChild(buttonMinus2);\r\ndocument.body.appendChild(buttonFetch);\r\ndocument.body.appendChild(buttonPush);\r\n"],
  "mappings": "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",
  "names": ["obj", "watch", "value", "observable", "watch", "watch", "observable"]
}
